{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abrar khan Zargai\\\\Desktop\\\\NUML-BMS\\\\project\\\\BUS-API-Dashboard\\\\src\\\\pages\\\\Logout.js\",\n    _s = $RefreshSig$();\n\nimport { Form, Input, Button, Typography, Radio, Upload, Table, Select, message, Spin, Row, Col, Divider } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { Redirect, Route } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport numl from '../numl.jpg';\nimport '../App.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { DepartmentApi, BusApi, StudentApi, RouteApi, DriverApi } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nconst propertiesUpload = {\n  name: 'myFile',\n  action: 'http://localhost:8080/api/auth/upload',\n  headers: {\n    authorization: 'authorization-text'\n  }\n};\n\nfunction Logout() {\n  _s();\n\n  const {\n    Title\n  } = Typography;\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [buses, setBuses] = useState([]);\n  const [routes, setRoutes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [slipPhoto, SetSlipPhoto] = useState();\n  const [mounted, setMounted] = useState(true); // const [mounted, setMounted] = useState(true);\n  // const [departments, setDepartments] = useState([]);\n  // const [form] = Form.useForm();\n\n  const columns = [{\n    title: \"Name\",\n    dataIndex: \"name\",\n    key: \"name\",\n    editable: true,\n    sorter: (a, b) => a.name.length - b.name.length\n  }, {\n    title: \"Capacity\",\n    dataIndex: \"capacity\",\n    key: \"capacity\",\n    editable: true,\n    sorter: (a, b) => a.capacity - b.capacity\n  }, {\n    title: \"AssignedRoute\",\n    dataIndex: \"assignedRoute\",\n    key: \"assignedRoute\",\n    editable: true,\n    sorter: (a, b) => a.assignedRoute.length - b.assignedRoute.length,\n    render: (_, record) => {\n      return record.assignedRoute.name;\n    }\n  }, {\n    title: \"AssignedDriver\",\n    dataIndex: \"assignedDriver\",\n    key: \"assignedDriver\",\n    editable: true,\n    render: (_, record) => {\n      return record.assignedDriver.name;\n    }\n  }];\n  const columnsRoute = [{\n    title: \"Name\",\n    dataIndex: \"name\",\n    key: \"name\",\n    sorter: (a, b) => a.name.length - b.name.length,\n    editable: true\n  }, {\n    title: \"Start Point\",\n    dataIndex: \"startPoint\",\n    key: \"startPoint\",\n    editable: false,\n    render: (_, record) => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: record.stops.length > 0 ? record === null || record === void 0 ? void 0 : record.stops[0].title : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }, this);\n    }\n  }, {\n    title: \"End Point\",\n    dataIndex: \"endPoint\",\n    key: \"endPoint\",\n    editable: false,\n    render: (_, record) => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: record.stops.length > 0 ? record === null || record === void 0 ? void 0 : record.stops[record.stops.length - 1].title : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }, this);\n    }\n  }];\n\n  const getBuses = async () => {\n    try {\n      setLoading(true);\n      const response = await BusApi.getAll();\n      const newResponse = [...response.data].map(bus => {\n        const object = { ...bus,\n          key: bus._id\n        };\n        return object;\n      });\n      setBuses(newResponse);\n      setLoading(false);\n      console.log(\"Response:\", newResponse);\n      console.log(\"BUSES\", buses);\n    } catch (error) {\n      console.log(error.message);\n      message.error(error.message);\n    }\n  };\n\n  const getRoutes = async () => {\n    try {\n      setLoading(true);\n      const response = await RouteApi.getAll();\n      console.log(\"response\", response);\n      const newResponse = [...response.data].map(route => {\n        const object = { ...route,\n          key: route._id\n        };\n        return object;\n      });\n      console.log(\"newResponse\");\n      setRoutes(newResponse);\n      setLoading(false);\n      console.log(response.data);\n    } catch (error) {\n      message.error(error.message);\n      console.log(error.message);\n    }\n  };\n\n  const handleChange = e => {\n    console.log('change', e);\n\n    if (e.file.status == 'done') {\n      // set the file url \n      alert('uploaded file');\n      let imgUrl = e.file.response.file;\n      console.log('use', imgUrl);\n\n      if (imgUrl) {\n        SetSlipPhoto(imgUrl);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const response = async () => {\n      try {\n        const myBuses = await BusApi.getAll();\n        const myRoutes = await RouteApi.getAll();\n        setBuses(myBuses.data);\n        setRoutes(myRoutes.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    response();\n    getBuses();\n    return () => {\n      setMounted(false);\n    };\n  }, [setMounted]); // useEffect(() => {\n  // const response = async () => {\n  //   try {\n  //     const myDepartments = await DepartmentApi.getAll();\n  //     setDepartments(myDepartments.data);\n  //   } catch (error) {\n  //     console.log(error);\n  //   }\n  // };\n  // if (mounted === true) {\n  // }\n  // response();\n  // return () => {\n  //   setMounted(false);\n  // };\n  // }, [setMounted]);\n  //   const onFinish = async (values) => {\n  //     if (values.password !== values.c_password) {\n  //       message.error(\"passwords do not match\");\n  //     } else {\n  //       try {\n  //         setLoading(true);\n  //         delete values.c_password;\n  //         console.log('final-val',values);\n  //         const response = await StudentApi.create(values);\n  //         console.log(\"Success\", response.data);\n  //         if (response) {\n  //           // localStorage.setItem(\"token\", response.data.token);\n  //           // localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n  //           // setIsLoggedIn(true);\n  //           message.success(\"Account Created\");\n  //           message.success(\"Logged in!\");\n  //           setLoading(false);\n  //         }\n  //       } catch (error) {\n  //         console.log(error);\n  //         message.error(\"Email already exists\");\n  //         setLoading(false);\n  //       }\n  //     }\n  //   };\n  //   const onFinishFailed = (errorInfo) => {\n  //     console.log(errorInfo);\n  //   };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLoggedIn ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/app\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }, this) : loading ? /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"large\",\n      style: {\n        position: \"absolute\",\n        top: \"47%\",\n        right: \"50%\",\n        transform: \"translate(0, -50%)\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundImage: `url(${numl})`,\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\",\n        height: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row \",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 m-auto info_center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"admin_Login_title text-center\",\n              children: \" Bus/Routes - Information \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              style: {\n                width: '100%'\n              },\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 22,\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: \"Buses\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 3\n                }, this), /*#__PURE__*/_jsxDEV(Table, {\n                  loading: loading,\n                  components: {\n                    body: {}\n                  },\n                  bordered: true,\n                  dataSource: buses,\n                  columns: columns\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 1\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 1\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              style: {\n                width: '100%'\n              },\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 22,\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: \"Routes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 1\n                }, this), /*#__PURE__*/_jsxDEV(Table, {\n                  loading: loading,\n                  components: {\n                    body: {}\n                  },\n                  bordered: true,\n                  dataSource: routes,\n                  columns: columnsRoute\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 7\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 1\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 1\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Logout, \"fExY2HLUAmaV+wgp9FS9A0IoOao=\");\n\n_c = Logout;\nexport default Logout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"sources":["C:/Users/Abrar khan Zargai/Desktop/NUML-BMS/project/BUS-API-Dashboard/src/pages/Logout.js"],"names":["Form","Input","Button","Typography","Radio","Upload","Table","Select","message","Spin","Row","Col","Divider","useEffect","useState","Redirect","Route","Link","numl","DepartmentApi","BusApi","StudentApi","RouteApi","DriverApi","Option","propertiesUpload","name","action","headers","authorization","Logout","Title","isLoggedIn","setIsLoggedIn","buses","setBuses","routes","setRoutes","loading","setLoading","slipPhoto","SetSlipPhoto","mounted","setMounted","columns","title","dataIndex","key","editable","sorter","a","b","length","capacity","assignedRoute","render","_","record","assignedDriver","columnsRoute","stops","getBuses","response","getAll","newResponse","data","map","bus","object","_id","console","log","error","getRoutes","route","handleChange","e","file","status","alert","imgUrl","myBuses","myRoutes","position","top","right","transform","backgroundImage","backgroundSize","backgroundPosition","height","display","flexDirection","alignItems","justifyContent","width","textAlign","body"],"mappings":"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","sourcesContent":["import { Form, Input, Button, Typography,Radio, Upload,Table,Select,message, Spin, Row, Col, Divider } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport numl from '../numl.jpg'\r\nimport '../App.css'\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport { DepartmentApi , BusApi,StudentApi,RouteApi, DriverApi} from \"../services/api\";\r\nconst { Option } = Select;\r\n\r\n\r\nconst propertiesUpload = {\r\n  name: 'myFile',\r\n  action: 'http://localhost:8080/api/auth/upload',\r\n  headers: {\r\n    authorization: 'authorization-text',\r\n  }\r\n}\r\n\r\n\r\nfunction Logout() {\r\n  const { Title } = Typography;\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [buses, setBuses] = useState([]);\r\n  const [routes, setRoutes] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [slipPhoto, SetSlipPhoto] = useState();\r\n  const [mounted, setMounted] = useState(true);\r\n\r\n  // const [mounted, setMounted] = useState(true);\r\n\r\n  // const [departments, setDepartments] = useState([]);\r\n  // const [form] = Form.useForm();\r\n\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      editable: true,\r\n      sorter: (a, b) => a.name.length - b.name.length\r\n\r\n    },\r\n    {\r\n      title: \"Capacity\",\r\n      dataIndex: \"capacity\",\r\n      key: \"capacity\",\r\n      editable: true,\r\n      sorter: (a, b) => a.capacity - b.capacity\r\n\r\n    },\r\n    {\r\n      title: \"AssignedRoute\",\r\n      dataIndex: \"assignedRoute\",\r\n      key: \"assignedRoute\",\r\n      editable: true,\r\n      sorter: (a, b) => a.assignedRoute.length - b.assignedRoute.length,\r\n      render: (_, record) => {\r\n        return record.assignedRoute.name;\r\n      },\r\n    },\r\n    {\r\n      title: \"AssignedDriver\",\r\n      dataIndex: \"assignedDriver\",\r\n      key: \"assignedDriver\",\r\n      editable: true,\r\n      render: (_, record) => {\r\n        return record.assignedDriver.name;\r\n      },\r\n    }\r\n  ];\r\n\r\n  const columnsRoute = [\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      sorter: (a, b) => a.name.length - b.name.length,\r\n      editable: true,\r\n    },\r\n    {\r\n      title: \"Start Point\",\r\n      dataIndex: \"startPoint\",\r\n      key: \"startPoint\",\r\n      editable: false,\r\n      render: (_, record) =>{\r\n       return <span>\r\n          {record.stops.length >0 ? record?.stops[0].title : ''}\r\n        </span>\r\n      }\r\n    },\r\n\r\n    {\r\n      title: \"End Point\",\r\n      dataIndex: \"endPoint\",\r\n      key: \"endPoint\",\r\n      editable: false,\r\n      render: (_, record) =>{\r\n       return <span>\r\n          {record.stops.length >0 ? record?.stops[record.stops.length -1].title : ''}\r\n        </span>\r\n                         }\r\n    }\r\n    \r\n\r\n  ];\r\n\r\n  const getBuses = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await BusApi.getAll();\r\n      const newResponse = [...response.data].map((bus) => {\r\n        const object = {\r\n          ...bus,\r\n          key: bus._id,\r\n        };\r\n        return object;\r\n      });\r\n\r\n      setBuses(newResponse);\r\n      setLoading(false);\r\n      console.log(\"Response:\", newResponse);\r\n      console.log(\"BUSES\", buses);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      message.error(error.message);\r\n    }\r\n  };\r\n\r\n  const getRoutes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await RouteApi.getAll();\r\n\r\n      console.log(\"response\", response);\r\n\r\n      const newResponse = [...response.data].map((route) => {\r\n        const object = {\r\n          ...route,\r\n          key: route._id,\r\n        };\r\n        return object;\r\n      });\r\n\r\n      console.log(\"newResponse\");\r\n\r\n      setRoutes(newResponse);\r\n      setLoading(false);\r\n      console.log(response.data);\r\n    } catch (error) {\r\n      message.error(error.message);\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e)=>{\r\n    console.log('change',e);\r\n    if(e.file.status == 'done'){\r\n      // set the file url \r\n      alert('uploaded file');\r\n      let imgUrl = e.file.response.file;\r\n      console.log('use', imgUrl)\r\n      if(imgUrl){\r\n        SetSlipPhoto(imgUrl);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    const response = async () => {\r\n      try {\r\n        const myBuses = await BusApi.getAll();\r\n        const myRoutes = await RouteApi.getAll();\r\n        setBuses(myBuses.data);\r\n        setRoutes(myRoutes.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    response();\r\n    getBuses();\r\n\r\n    return () => {\r\n      setMounted(false);\r\n    };\r\n    \r\n  }, [setMounted]);\r\n\r\n    // useEffect(() => {\r\n    // const response = async () => {\r\n    //   try {\r\n    //     const myDepartments = await DepartmentApi.getAll();\r\n    //     setDepartments(myDepartments.data);\r\n    //   } catch (error) {\r\n    //     console.log(error);\r\n    //   }\r\n    // };\r\n    // if (mounted === true) {\r\n    // }\r\n    // response();\r\n    // return () => {\r\n    //   setMounted(false);\r\n    // };\r\n  // }, [setMounted]);\r\n\r\n\r\n//   const onFinish = async (values) => {\r\n//     if (values.password !== values.c_password) {\r\n//       message.error(\"passwords do not match\");\r\n//     } else {\r\n//       try {\r\n//         setLoading(true);\r\n//         delete values.c_password;\r\n//         console.log('final-val',values);\r\n//         const response = await StudentApi.create(values);\r\n//         console.log(\"Success\", response.data);\r\n//         if (response) {\r\n//           // localStorage.setItem(\"token\", response.data.token);\r\n//           // localStorage.setItem(\"user\", JSON.stringify(response.data.user));\r\n//           // setIsLoggedIn(true);\r\n//           message.success(\"Account Created\");\r\n//           message.success(\"Logged in!\");\r\n//           setLoading(false);\r\n//         }\r\n//       } catch (error) {\r\n//         console.log(error);\r\n//         message.error(\"Email already exists\");\r\n//         setLoading(false);\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   const onFinishFailed = (errorInfo) => {\r\n//     console.log(errorInfo);\r\n//   };\r\n\r\n  return (\r\n    <>\r\n      {isLoggedIn ? (\r\n        <Redirect to=\"/app\" />\r\n      ) : loading ? (\r\n        <Spin\r\n          size=\"large\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"47%\",\r\n            right: \"50%\",\r\n            transform: \"translate(0, -50%)\",\r\n          }}\r\n        />\r\n      ) : (\r\n         \r\n        \r\n        <div\r\n          style={{\r\n            backgroundImage:`url(${numl})`,\r\n            \r\n            backgroundSize:\"cover\",\r\n            backgroundPosition:\"center\",\r\n            height:\"auto\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n           {/************ Container Started Here  **********/}\r\n           <div className='container'>\r\n          <div className='row '>\r\n          <div className='col-12 m-auto info_center'>\r\n          <h1 className='admin_Login_title text-center'> Bus/Routes - Information </h1>\r\n          \r\n         \r\n      \r\n\r\n\r\n<Row style={{width:'100%'}}>\r\n<Col span={22} >\r\n\r\n  <h1 style={{textAlign:\"center\"}}>Buses</h1>\r\n\r\n<Table\r\n        loading={loading}\r\n        components={{\r\n          body: {},\r\n        }}\r\n        bordered\r\n        dataSource={buses}\r\n        columns={columns}\r\n        \r\n      />\r\n      </Col>\r\n</Row>\r\n<Row style={{width:'100%'}}>\r\n<Col span={22} >\r\n<h1 style={{textAlign:\"center\"}}>Routes</h1>\r\n\r\n      <Table\r\n        loading={loading}\r\n        components={{\r\n          body: {},\r\n        }}\r\n        bordered\r\n        dataSource={routes}\r\n        columns={columnsRoute}\r\n        \r\n      />\r\n      </Col>\r\n</Row>\r\n            </div>\r\n          </div>\r\n          </div>\r\n          {/* Container End Here  */}  \r\n\r\n\r\n        </div>\r\n       \r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Logout;\r\n"]},"metadata":{},"sourceType":"module"}